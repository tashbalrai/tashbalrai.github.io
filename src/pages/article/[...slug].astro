---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Body/Header.tsx'
import ArticleDetails from '../../components/Body/ArticleDetails.tsx'
import ThemeScript from '../../components/Head/ThemeScript.astro';
import Seo from '../../components/Head/Seo.astro';
import Footer from '../../components/Body/Footer.tsx'
import '../../styles/global.css';
import { getCollection, render } from 'astro:content';


export async function getStaticPaths() {
  const collection = await getCollection('articles')
  return collection.map((article) => {
    return {
      params: { slug: article.data.slug },
      props: { article},
    };
  });
}

const { article } = Astro.props;
const { Content } = await render(article);

---

<BaseLayout>
  <ThemeScript slot="meta-head"/>
  <Seo slot="meta-head" title="Huntize: Here the hunt starts" description="Huntize is a platform for hunters to share their hunting experiences and tips." keywords="hunting, hunting tips, hunting experiences" />
  <Header client:only="react" slot="body-header"/>
  <article class="article-details" slot="body-main">
    <Content />
    <footer class="w-full border-(--grid-color) border-t-1 mt-24 pt-5">
      {article.data.author && <p class="text-lg mt-5 ml-2">
          Written by {article.data.author}
      </p>}
      {article.data.publishedAt && <p class="text-sm ml-2">
          Published: {article.data.publishedAt?.toDateString()}
      </p>}
      {article.data.aboutAuthor && <p class="text-sm mt-5 ml-2 mb-10">
          {article.data.aboutAuthor}
      </p>}
    </footer>
  </article>
  <Footer client:only="react" slot="body-footer"/>
</BaseLayout>